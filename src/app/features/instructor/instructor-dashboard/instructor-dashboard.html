<section class="instructor-dashboard">
  <div class="dashboard-header">
    <h2>ğŸ‘¨â€ğŸ« Espace Instructeur</h2>
    <p class="subtitle">GÃ©rez vos cours et leur contenu</p>
  </div>

  <button class="btn-add-course" (click)="openAdd()" *ngIf="!showForm()">
    <span class="icon">â•</span>
    CrÃ©er un nouveau cours
  </button>

  <!-- FORMULAIRE PRINCIPAL -->
  <div *ngIf="showForm()" class="form-container">
    <form class="course-form" (ngSubmit)="save()">
      <div class="form-header">
        <h3>{{ editId() ? 'âœï¸ Modifier le cours' : 'ğŸ“ Nouveau cours' }}</h3>
        <button type="button" class="btn-close" (click)="cancel()">âœ•</button>
      </div>

      <div class="form-body">
        <!-- Basic Information -->
        <div class="form-section">
          <h4>Informations de base</h4>
          <div class="form-grid">
            <label class="form-field">
              <span class="label-text">Titre du cours *</span>
              <input [(ngModel)]="form().title" name="title" placeholder="Ex: Angular AvancÃ©" required />
            </label>

            <label class="form-field">
              <span class="label-text">CatÃ©gorie *</span>
              <input [(ngModel)]="form().category" name="category" placeholder="Ex: DÃ©veloppement Web" required />
            </label>
          </div>

          <label class="form-field">
            <span class="label-text">Description</span>
            <textarea [(ngModel)]="form().description" name="description" placeholder="DÃ©crivez votre cours..."
              rows="4"></textarea>
          </label>
        </div>

        <!-- SECTION CHAPITRES -->
        <div class="form-section chapters-section">
          <div class="section-header">
            <h4>ğŸ“š Chapitres et LeÃ§ons</h4>
            <button type="button" class="btn-add-chapter" (click)="addChapter()">
              <span>â•</span> Ajouter un chapitre
            </button>
          </div>

          <div class="chapters-list" *ngIf="form().chapters.length > 0; else noChapters">
            <div *ngFor="let chapter of form().chapters; let i = index" class="chapter-card">
              <div class="chapter-header">
                <span class="chapter-number">Chapitre {{ i + 1 }}</span>
                <button type="button" class="btn-delete-chapter" (click)="removeChapter(i)">
                  ğŸ—‘ï¸ Supprimer
                </button>
              </div>

              <label class="form-field">
                <span class="label-text">Titre du chapitre *</span>
                <input [(ngModel)]="chapter.title" [name]="'chapter_title_' + i"
                  placeholder="Ex: Introduction Ã  Angular" required />
              </label>

              <!-- SECTION LEÃ‡ONS -->
              <div class="lessons-section">
                <div class="lessons-header">
                  <h5>ğŸ¥ LeÃ§ons</h5>
                  <button type="button" class="btn-add-lesson" (click)="addLesson(i)">
                    â• Ajouter une leÃ§on
                  </button>
                </div>

                <div class="lessons-list" *ngIf="chapter.lessons.length > 0; else noLessons">
                  <div *ngFor="let lesson of chapter.lessons; let j = index" class="lesson-card">
                    <div class="lesson-header">
                      <span class="lesson-number">LeÃ§on {{ j + 1 }}</span>
                      <button type="button" class="btn-delete-lesson" (click)="removeLesson(i, j)">
                        âœ•
                      </button>
                    </div>

                    <div class="lesson-fields">
                      <label class="form-field">
                        <span class="label-text">Titre *</span>
                        <input [(ngModel)]="lesson.title" [name]="'lesson_title_' + i + '_' + j"
                          placeholder="Ex: Installation et configuration" required />
                      </label>

                      <label class="form-field">
                        <span class="label-text">URL VidÃ©o *</span>
                        <input [(ngModel)]="lesson.videoUrl" [name]="'lesson_url_' + i + '_' + j"
                          placeholder="https://example.com/video.mp4" required />
                      </label>
                    </div>
                  </div>
                </div>

                <ng-template #noLessons>
                  <div class="empty-lessons">
                    <p>Aucune leÃ§on. Cliquez sur "Ajouter une leÃ§on" pour commencer.</p>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>

          <ng-template #noChapters>
            <div class="empty-chapters">
              <div class="empty-icon">ğŸ“š</div>
              <p>Aucun chapitre. Cliquez sur "Ajouter un chapitre" pour structurer votre cours.</p>
            </div>
          </ng-template>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-save">
          <span class="icon">ğŸ’¾</span>
          {{ editId() ? 'Enregistrer les modifications' : 'CrÃ©er le cours' }}
        </button>
        <button type="button" class="btn-cancel" (click)="cancel()">
          Annuler
        </button>
      </div>
    </form>
  </div>

  <!-- LISTE DES COURS -->
  <div *ngIf="!showForm()" class="courses-list">
    <h3>ğŸ“– Mes Cours ({{ courses().length }})</h3>

    <div class="courses-grid" *ngIf="courses().length > 0; else noCourses">
      <div *ngFor="let course of courses()" class="course-item">
        <div class="course-content">
          <h4>{{ course.title }}</h4>
          <p class="course-description">{{ course.description }}</p>
          <div class="course-meta">
            <span class="category">{{ course.category }}</span>
            <span class="chapters-count">{{ course.chapters.length }} chapitres</span>
          </div>
        </div>

        <div class="course-actions">
          <button class="btn-edit" (click)="openEdit(course)">
            <span class="icon">âœï¸</span>
            Modifier
          </button>
          <button class="btn-delete" (click)="remove(course.id)">
            <span class="icon">ğŸ—‘ï¸</span>
            Supprimer
          </button>
        </div>
      </div>
    </div>

    <ng-template #noCourses>
      <div class="empty-state">
        <div class="empty-icon">ğŸ“š</div>
        <h3>Aucun cours crÃ©Ã©</h3>
        <p>Commencez par crÃ©er votre premier cours</p>
      </div>
    </ng-template>
  </div>
</section>